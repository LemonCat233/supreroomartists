@charset "UTF-8";

/* ———— 0. 引入 ———— */
@import url('https://fonts.googleapis.com/css2?family=Poiret+One&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Sulphur+Point:wght@300;400;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@100..900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@100..900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100..900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@100..900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Alumni+Sans+Pinstripe:ital@0;1&display=swap');
@import url('https://fonts.googleapis.com/css2?family=ZCOOL+QingKe+HuangYou&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=PT+Mono&display=swap');

@import url("https://chinese-fonts-cdn.deno.dev/packages/zqfs/dist/ZhuqueFangsong-Regular/result.css");

@import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css");


/* ———— 1. 全局 ———— */
:root {
    /* 图片和颜色 */
    --global-white-color: 248, 248, 248;
    --global-pale-color: 235, 235, 235;
    --global-light-color: 180, 180, 180;
    --global-dark-color: 90, 90, 90;
    --global-black-color: 30, 30, 30;
    --global-accent-1: 68, 123, 230;
    --global-accent-2: 24, 80, 187;
    --global-accent-3: 23, 24, 120;
    --alt-color: 221, 102, 17;
    --warning-color: 193, 44, 50;
    --accept-color: 20, 169, 32;
    --neutral-color: 193, 147, 44;

    --global-bg: var(--global-white-color);
    --global-txt: var(--global-black-color);
    --light-ui-bg: var(--global-pale-color);
    --light-ui-txt: var(--global-black-color);
    --dark-ui-bg: var(--global-dark-color);
    --dark-ui-txt: var(--global-white-color);
    --bright-ui-bg: var(--global-accent-2);
    --bright-ui-txt: var(--dark-ui-txt);

    --global-border:  var(--global-light-color);

    --link-primary: var(--global-accent-2);
    --link-hover: var(--global-accent-1);
    --link-visited: var(--global-accent-3);
    --link-newpage: var(--alt-color);

    --body-bg: var(--global-bg);
    --body-txt: var(--global-txt);

    --header-bg: var(--light-ui-bg);
    --header-txt: var(--light-ui-txt);
    --header-hover-bg: var(--dark-ui-bg);
    --header-hover-txt: var(--dark-ui-txt);

    --topbar-bg: var(--header-bg), 0;
    --topbar-txt: var(--header-txt);
    --topbar-hover-bg: var(--dark-ui-bg);
    --topbar-hover-txt: var(--dark-ui-txt);
    --topbar-border: var(--global-border), .8;

    --dropdown-bg: var(--header-bg);
    --dropdown-txt: var(--header-txt);
    --dropdown-hover-bg: var(--bright-ui-bg);
    --dropdown-hover-txt: var(--bright-ui-txt);
    --dropdown-border: var(--topbar-border);

    --search-bg: var(--header-bg), 0;
    --search-txt: var(--header-txt);
    --search-hover-bg: var(--header-hover-bg);
    --search-hover-txt: var(--header-hover-txt);

    --user-bg: var(--header-bg), 0;
    --user-txt: var(--header-txt);
    --user-hover-bg: var(--header-hover-bg);
    --user-drop-bg: var(--header-hover-bg);
    --user-drop-txt: var(--topbar-hover-txt);
    --user-hover-drop-bg: var(--dropdown-hover-bg);
    --user-hover-drop-txt: var(--dropdown-hover-txt);

    --openmenu-bg: var(--header-bg), 0;
    --openmenu-txt: var(--header-txt);
    --openmenu-hover-bg: var(--header-hover-bg);
    --openmenu-hover-txt: var(--header-hover-txt);

    --sidebar-bg: var(--global-bg);

    --heading-bg: var(--dark-ui-bg);
    --heading-txt: var(--dark-ui-txt);
    --heading-border: var(--global-light-color);

    --menu-bg: var(--light-ui-bg);
    --menu-txt: var(--light-ui-txt);
    --menu-hover-bg: var(--bright-ui-bg);
    --menu-hover-txt: var(--bright-ui-txt);

    --scrollbar-track: var(--light-ui-bg), .4;
    --scrollbar-thumb: var(--dark-ui-bg);

    --rate-bg: var(--light-ui-bg);
    --rate-txt: var(--light-ui-txt);
    --rateup-bg: var(--rate-bg);
    --rateup-txt: var(--accept-color);
    --ratedown-bg: var(--rate-bg);
    --ratedown-txt: var(--warning-color);
    --cancel-bg: var(--rate-bg);
    --cancel-txt: var(--neutral-color);
    --info-bg: var(--rate-bg);
    --info-txt: var(--global-accent-2);

    --tabview-bg: var(--light-ui-bg);
    --tabview-txt: var(--light-ui-txt);
    --tabview-hover-bg: var(--bright-ui-bg);
    --tabview-hover-txt: var(--bright-ui-txt);
    --tabview-selected-bg: var(--dark-ui-bg);
    --tabview-selected-txt: var(--dark-ui-txt);

    --toc-bg: var(--light-ui-bg);
    --toc-txt: var(--light-ui-txt);
    --toc-heading-bg: var(--dark-ui-bg);
    --toc-heading-hover-bg: var(--bright-ui-bg);
    --toc-heading-hover-txt: var(--bright-ui-txt);
    --toc-heading-txt: var(--dark-ui-txt);
    --toc-border: var(--global-border);

    --th-bg: var(--light-ui-bg);
    --th-txt: var(--light-ui-txt);
    --td-bg: var(--global-bg);
    --td-txt: var(--global-txt);

    --light-block-bg: var(--light-ui-bg);
    --light-block-txt: var(--light-ui-txt);
    --dark-block-bg: var(--dark-ui-bg);
    --dark-block-txt: var(--dark-ui-txt);

    --global-fader-bg: var(--global-black-color), .8;

    --btn-bg: var(--light-ui-bg);
    --btn-txt: var(--light-ui-txt);
    --btn-hover-bg: var(--dark-ui-bg);
    --btn-hover-txt: var(--dark-ui-txt);

    --bottombar-bg: var(--light-ui-bg);
    --bottombar-txt: var(--light-ui-txt);

    /* 尺寸和距离 */
    --header-height: 3rem;
    --topbar-height: 2rem;
    --banner-height: 10rem;
    --dropdown-height: 2rem;
    --sidebar-width: 15rem;
    --content-width: 48rem;

    --header-ui-size: var(--header-height);

    --user-icon-padding: 0.5rem;
    --user-drop-width: 9rem;
    --user-drop-height: 3rem;

    --global-border-width: 0.1rem;
    --topbar-border-width: var(--global-border-width);
    --dropdown-border-width: var(--global-border-width);

    --global-font-size: 0.975rem;

    --header-title-size: calc(0.5rem + 1.6vw);
    --topbar-size: calc(0.5rem + 0.5vw);
    --dropdown-size: var(--topbar-size);
    --banner-title-size: calc(2.5rem + 3vw);
    --banner-subtitle-size: 1rem;

    --rate-height: 1.2rem;

    --toc-min-width: 12.5rem;
    --toc-heading-height: 2rem;

    /* 自定义动画时间 */

    --global-duration: 0.4s;
    --global-hover-duration: 0.2s;

    /* 自定义文本 */
    --header-title: "THE BACKROOMS 中文维基";
    --banner-title: "SUPREMATISROOMS.";
    --banner-subtitle: "几何至上";

    /* UI 图像资源 */
    /* 侧栏按钮图标 */
    --sidebar-ui: url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath paint-order='stroke fill markers' d='M10 57.5h100v5H10zM10 37.5h100v5H10zM10 77.5h100v5H10z'/%3E%3C/svg%3E");
    /* 搜索图标 */
    --search-icon: url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='%23000' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='47.5' cy='52.5' r='30' stroke-width='15'/%3E%3Cpath stroke-width='14.78' d='M75.045 74.89L99.95 99.794l-.156.156L74.89 75.045z'/%3E%3C/g%3E%3C/svg%3E");
    /* 未登录用户图标 */
    --user-icon: url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M60 19.113a20 20 0 0 0-20 20 20 20 0 0 0 20 20 20 20 0 0 0 20-20 20 20 0 0 0-20-20zm0 45a40 40 0 0 0-37.936 27.543A50 50 0 0 0 60 109.113a50 50 0 0 0 37.979-17.516A40 40 0 0 0 60 64.113z'/%3E%3Ccircle cx='60' cy='60' r='54.1' fill='none' stroke='%23000' stroke-width='11.799' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
    /* uv按钮图标 */
    --rateup: url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 55h100v10H10z'/%3E%3Cpath d='M65 10v100H55V10z'/%3E%3C/svg%3E");
    /* dv按钮图标 */
    --ratedown: url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 55h100v10H10z'/%3E%3C/svg%3E");
    /* 取消图标 */
    --cancel: url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 102.178L102.178 10 110 17.82 17.82 110z'/%3E%3Cpath d='M17.822 10L110 102.178 102.18 110 10 17.82z'/%3E%3C/svg%3E");
    /* 著作信息 “i” 按钮 */
    --info: url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M55 45h10v50H55zM55 25h10v10H55zM45 45h10v10H45zM45 85h10v10H45zM65 85h10v10H65z'/%3E%3C/svg%3E");


    /* 字体 */
    --banner-font: "Alumni Sans Pinstripe", "Zhuque Fangsong (technical preview)", Franklin Gothic Medium, Franklin Gothic, ITC Franklin Gothic, Arial, sans-serif;
    --header-font: "Poiret One", "Noto Sans SC", "Noto Sans TC", Franklin Gothic Medium, Franklin Gothic, ITC Franklin Gothic, Arial, sans-serif;
    --title-font: "Sulphur Point", "Noto Sans SC", "Noto Sans TC", Franklin Gothic Medium, Franklin Gothic, ITC Franklin Gothic, Arial, sans-serif;
    --body-font: "Barlow", "Noto Sans SC", "Noto Sans TC", Arimo, Verdana, Geneva, sans-serif;
    --ui-font: "Montserrat", "Noto Sans SC", "Noto Sans TC", Arimo, Verdana, Geneva, sans-serif;
    --mono-font: "PT Mono", "Noto Serif SC", "Noto Serif TC", Consolas, monaco, monospace;
}

* {
    scrollbar-width: thin;
    scrollbar-color: rgb(var(--scrollbar-thumb)) rgba(var(--scrollbar-track));
}

::-webkit-scrollbar {
    width: 0.5rem;
    background: transparent;
}

::-webkit-scrollbar-track {
    background: rgba(var(--scrollbar-track));
}

::-webkit-scrollbar-thumb {
    background-color: rgb(var(--scrollbar-thumb));
}

body {
    background: rgb(var(--body-bg));
    color: rgb(var(--body-txt));

    font-family: var(--body-font);
    font-size: var(--global-font-size);

    overflow-wrap: break-word;
    word-break: break-word;
    line-height: 1.5;
}

#container {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

/* 全局：链接设置 */
a {
    color: rgb(var(--link-primary));
    transition: color var(--global-duration);
}

a:visited {
    color: rgb(var(--link-visited));
}

a:hover {
    color: rgb(var(--link-hover));
    transition: color var(--global-hover-duration);
}

a.newpage {
    color: rgb(var(--link-newpage));
}

table.form {
    margin: 0 auto;
}

table.form td {
    vertical-align: top;
}

input.text, textarea, select {
    border:  var(--global-border-width) solid rgb(var(--global-border));
    box-sizing: border-box;
    transition: border var(--global-duration), box-shadow var(--global-duration);
    font-family: var(--ui-font);
}

:is(input.text, textarea):focus-visible, select:focus, [type=file]:is(:focus, :hover) {
    outline: 0;
    border: var(--global-border-width) solid rgb(var(--bright-ui-bg));
    box-shadow: 0 0 0 var(--global-border-width) rgb(var(--bright-ui-bg));
    transition: border var(--global-hover-duration), box-shadow var(--global-hover-duration);
}

select {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    position: relative;
    width: 5rem;
    padding: 0 0.1rem;
}

[type=radio], input[type=checkbox] {
    vertical-align: bottom;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    background-color: rgb(var(--global-bg));
    border: .05rem solid rgb(var(--global-border));
    border-radius: 0;
    width: 1rem;
    height: 1rem;
    position: relative;
    transition: background 0.1s cubic-bezier(0, 0.3, 0.8, 1.45), border 0.1s cubic-bezier(0, 0.3, 0.8, 1.45);
}

[type=checkbox]::before {
    content: "\F272";
    font-family: bootstrap-icons !important;
    font-style: normal;
    font-weight: normal !important;
    font-variant: normal;
    text-transform: none;
    line-height: 1;
    vertical-align: -.125em;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    color: rgb(var(--global-bg));
    transition: color 0.1s cubic-bezier(0, 0.3, 0.8, 1.45);
}

[type=checkbox]:checked {
    border-color: rgb(var(--bright-ui-bg));
    background-color: rgb(var(--bright-ui-bg));
}

[type=checkbox]:checked::before {
    color: rgb(var(--bright-ui-txt));
}

[type=radio] {
    border-radius: 50%;
}

[type=radio]:checked {
    border: solid 0.225rem rgb(var(--bright-ui-bg));
}

[type=file]::file-selector-button {
    background: rgb(var(--light-ui-bg));
    color: rgb(var(--light-ui-txt));
    border: unset;
    border-right: var(--global-border-width) solid rgb(var(--global-border));
    border-radius: 0;
    transition: background var(--global-duration), color var(--global-duration);
}

[type=file]:is(:hover, :focus)::file-selector-button {
    background: rgb(var(--bright-ui-bg));
    color: rgb(var(--bright-ui-txt));
    transition: background var(--global-hover-duration), color var(--global-hover-duration);
}

.btn:not(span, #login-status *, .owindow .button-bar > a[onclick*=cleanAll]) {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    margin: 0;
    padding: 0.5rem;
    background: rgb(var(--btn-bg));
    color: rgb(var(--btn-txt));
    font-family: var(--ui-font);
    font-size: calc(0.6rem + 0.4vw);
    border: var(--global-border-width) solid rgb(var(--global-border));
    transition: background var(--global-duration), color var(--global-duration);
}

.btn:not(span, #login-status *, .owindow .button-bar > a[onclick*=cleanAll]):is(:hover, :focus) {
    background: rgb(var(--btn-hover-bg));
    color: rgb(var(--btn-hover-txt));
    transition: background var(--global-hover-duration), color var(--global-hover-duration);
}


/* 页面内的用户名 */
.printuser {
    display: inline-flex;
    align-items: baseline;
    gap: .25em;
    text-indent: 0;
}

. printuser a {
    margin-right: 0;
}

.printuser>a:first-child {
    display: flex;
    user-select: none;
    align-self: center;
    min-width: max-content;
}

.printuser>a:first-child img {
    height: 1.25em;
    width: 1.25em;
    padding: 0;
    padding-left: .5em;
    object-fit: contain;
    background-size: cover;
    overflow: hidden;
}


/* ———— 2. 版头 ———— */
#header {
    display: grid;
    grid-template-columns: var(--header-ui-size) 1fr auto auto;
    grid-template-rows: auto auto auto var(--header-height) var(--topbar-height);
    position: sticky;
    top: calc(0px - var(--banner-height) - var(--header-height) - var(--topbar-height));
    z-index: 10;
    pointer-events: none;
}

#header > * {
    pointer-events: auto;
}

#header-extra-div-1 {
    grid-column: 1 / 5;
    grid-row: 1 / 3;
    position: sticky;
    top: 0;
    width: 100%;
    height: calc(var(--header-height) + var(--topbar-height));
    background: linear-gradient(to top, rgba(var(--header-bg), .8), rgba(var(--header-bg), 1));
    backdrop-filter: blur(0.1rem);
    z-index: 9;
    border-bottom: 0.1rem solid rgba(var(--topbar-border));
}

#header-extra-div-2, #header-extra-div-3 {
    pointer-events: none;
}

/* ———— 3. 顶栏 ———— */
#top-bar {
    grid-column: 1 / 5;
    grid-row: 2 / 3;
    position: sticky;
    top: var(--header-height);
    width: 100%;
    height: var(--topbar-height);
    margin: 0;
    padding: 0;
    background: rgba(var(--topbar-bg));
    color: rgb(var(--topbar-txt));
    font-family: var(--ui-font);
}

#top-bar > div > ul {
    display: flex;
    height: var(--topbar-height);
    max-width: var(--content-width);
    margin: 0 auto;
}

#top-bar > div > ul > li {
    flex-grow: 1;
    flex-basis: min-content;
    position: relative;
    margin: 0;
    padding: 0;
    list-style: none;
}

#top-bar > div > ul > li > a {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
    margin: 0;
    padding: 0;
    font-size: var(--topbar-size);
    transition: background calc(var(--global-duration)), color calc(var(--global-duration));
}

#top-bar > div > ul > li:is(:hover, :focus, .sfhover, :focus-within) > a, #top-bar ul li.sfhover a:hover, #top-bar ul li:hover a:hover {
    background: rgb(var(--topbar-hover-bg));
    color: rgb(var(--topbar-hover-txt));
    transition: background calc(var(--global-hover-duration)), color calc(var(--global-hover-duration));
}

#top-bar > div > ul > li > ul {
    display: flex;
    flex-direction: column;
    justify-content: center;
    visibility: visible;
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    margin: 0;
    padding: 0;
    color: rgb(var(--dropdown-txt));
    border: var(--dropdown-border-width)  solid rgba(var(--dropdown-border));
    box-sizing: border-box;
    backdrop-filter: blur(0.1rem);
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--global-duration);
}

#top-bar > div > ul > li:is(:hover, :focus, .sfhover, :focus-within)  > ul {
    visibility: visible;
    opacity: 1;
    pointer-events: auto;
    transition: opacity var(--global-hover-duration);
}

#top-bar > div > ul > li  > ul > li {
    position: static;
    width: 100%;
    margin: 0;
    padding: 0;
    border: unset;
}

#top-bar > div > ul > li > ul > li:is(:hover, :focus, :active) {
    border: unset;
}

#top-bar > div > ul > :is(li, li:hover, li:focus, li.sfhover, li:focus-within) > ul > li a {
    background: rgba(var(--dropdown-bg), .8);
    color: rgb(var(--dropdown-txt));
    transition: background calc(var(--global-duration)), color calc(var(--global-duration));
}

#top-bar > div > ul > :is(li, li:hover, li:focus, li.sfhover, li:focus-within) > ul > li a:is(:hover, :focus, :active) {
    background: rgb(var(--dropdown-hover-bg));
    color: rgb(var(--dropdown-hover-txt));
    transition: background calc(var(--global-hover-duration)), color calc(var(--global-hover-duration));
}

#top-bar > div > ul > :is(li, li:hover, li:focus, li.sfhover, li:focus-within) > ul > li > a {
    display: block;
    place-content: center;
    width: 100%;
    height: var(--dropdown-height);
    padding: 0 0.5rem;
    font-size: var(--dropdown-size);
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    text-align: center;
}

#top-bar .mobile-top-bar {
    display: none;
}


/* ———— 4. 搜索 ———— */
#search-top-box {
    grid-column: 3 / 4;
    grid-row: 1 / 2;
    position: sticky;
    top: 0;
    width: calc(var(--header-ui-size) / 1.5);
    height: var(--header-ui-size);
    background: rgba(var(--search-bg));
    transition: background var(--global-duration);
}

#search-top-box:is(:hover, :focus) {
    background: rgba(var(--search-hover-bg));
    transition: background var(--global-hover-duration);
}

/* 搜索栏：html表单 */
#search-top-box #search-top-box-form {
    display: block;
    position: static;
    width: 100%;
    height: 100%;
}

/* 搜索栏：输入框 */
#search-top-box #search-top-box-form #search-top-box-input {
    display: none;
}

/* 搜索栏："搜索"按钮 */
#search-top-box-form input[type=submit] {
    --mask-repeat: no-repeat;
    --mask-size: 80% auto;
    --mask-position: center;

    display: block;
    position: relative;
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    background-color: rgb(var(--search-txt));
    border: none;
    font-size: 0;
    -webkit-mask-image: var(--search-icon);
    -webkit-mask-repeat: var(--mask-repeat);
    -webkit-mask-size: var(--mask-size);
    -webkit-mask-position: var(--mask-position);
    mask-image: var(--search-icon);
    mask-repeat: var(--mask-repeat);
    mask-size: var(--mask-size);
    mask-position: var(--mask-position);
}

#search-top-box-form input[type=submit]:is(:hover, :focus, :active) {
    background-color: rgba(var(--search-hover-txt));
}


/* ———— 5. 用户 ———— */
#login-status {
    grid-column: 4 / 5;
    grid-row: 1 / 2;
    position: sticky;
    top: 0;
    width: var(--header-ui-size);
    height: var(--header-ui-size);
    background: rgba(var(--user-bg));
    font-size: 0;
    cursor: pointer;
    transition: background var(--global-duration);
}

#login-status:is(:hover, :focus, :active) {
    background: rgba(var(--user-hover-bg));
    transition: background var(--global-hover-duration);
}

#login-status .printuser {
    display: block;
    position: relative;
    width: 100%;
    height: 100%;
    /* 移除默认显示的用户名 */
    font-size: 0;
}

/* 用户：个人信息弹窗链接 */
#login-status .printuser > a {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    padding: var(--user-icon-padding);
    background-color: transparent;
}

#login-status:hover .printuser > a {
    background-color: transparent;
}

/* 用户：个人头像 */
#login-status .printuser > a > img.small {
    padding: 0;
    width: calc(var(--fix-top-height) - var(--user-icon-padding) * 2);
    height: calc(var(--fix-top-height) - var(--user-icon-padding) * 2);
    box-sizing: border-box;
    /* 移除Karma值 */
    background-image: none !important;
}

#login-status:hover .printuser > a > img.small {
    border: 2px solid rgba(var(--user-hover-icon-border-color));
}

/* 用户：“▼”按钮 */
#login-status #account-topbutton {
    display: none;
}

/* 用户：“我的账户”链接 */
#login-status #my-account {
    display: none;
}

/* 用户：账号信息菜单 */
#login-status #account-options {
    display: block !important;
    position: absolute;
    top: 100%;
    right: 0;
    width: calc(var(--user-drop-width) * 2);
    height: calc(var(--user-drop-height) * 3);
    border: none;
    pointer-events: none;
    opacity: 0;
    transition: opacity var(--global-duration);
}

#login-status:is(:hover, :focus, :active) #account-options {
    pointer-events: auto;
    opacity: 1;
    transition: opacity var(--global-hover-duration);
}

#login-status:is(:hover, :focus, :active) #account-options ul {
    display: grid;
    grid-template-rows: repeat(3, 1fr);
    grid-template-columns: repeat(2, 1fr);
    width: 100%;
    height: 100%;
}

#login-status:is(:hover, :focus, :active) #account-options ul li {
    width: var(--user-drop-column-width);
    height: var(--user-drop-row-height);
    margin: 0;
    padding: 0;
    background: rgba(var(--user-drop-bg), .8);
    color: rgba(var(--user-drop-txt));
    transition: background var(--global-duration), color var(--global-hover-duration);
}

#login-status:is(:hover, :focus, :active) #account-options ul li:is(:hover, :focus, :active) {
    background-color: rgba(var(--user-hover-drop-bg));
    color: rgba(var(--user-hover-drop-txt));
    transition: background var(--global-hover-duration), color var(--global-hover-duration);
}

#login-status:is(:hover, :focus, :active) #account-options ul li a {
    display: inline-flex;
    justify-content: center;
    align-items: center;

    margin: 0;
    padding: 0;
    text-decoration: none;
    font-size: 0.9rem;
}

/* 用户：没登录的人会看到的版本 */
#login-status > span:not(.printuser) {
    --mask-repeat: no-repeat;
    --mask-size: 60%;
    --mask-position: center;
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    width: var(--header-ui-size);
    height: var(--header-ui-size);
    padding: 0;
    background: rgb(var(--user-txt));
    mask-image: var(--user-icon);
    mask-repeat: var(--mask-repeat);
    mask-size: var(--mask-size);
    mask-position: var(--mask-position);
    -webkit-mask-image: var(--user-icon);
    -webkit-mask-repeat: var(--mask-repeat);
    -webkit-mask-size: var(--mask-size);
    -webkit-mask-position: var(--mask-position);
    font-size: 0;
    cursor: pointer;
    transition: background var(--global-duration);
}

#login-status:is(:hover, :focus,:focus-within) > span:not(.printuser) {
    background: rgb(var(--user-drop-txt));
    transition: background var(--global-hover-duration);
}

#login-status:is(:hover, :focus,:focus-within) :is(.login-status-create-account, .login-status-sign-in) {
    display: flex;
    position: absolute;
    top: 100%;
    right: 0;
    height: var(--user-drop-height);
    width: var(--user-drop-width);
    font-size: var(--global-font-size);
    color: rgb(var(--user-drop-txt));
    text-align: center;
    text-decoration: none;
    justify-content: center;
    align-items: center;
    transition: background var(--global-duration);
}

#login-status:is(:hover, :focus,:focus-within) .login-status-create-account {
    right: var(--user-drop-width);
}

#login-status:is(:hover, :focus,:focus-within) :is(.login-status-create-account, .login-status-sign-in):is(:hover, :focus) {
    background: rgb(var(--user-hover-drop-bg));
    color: rgb(var(--user-hover-drop-txt));
    transition: background var(--global-hover-duration);
}


/* ———— 6. 网站标题 ———— */
#header h1 {
    grid-column: 2 / 3;
    grid-row: 1 / 2;
    position: sticky;
    top: 0;
    width: 100%;
    height: var(--header-height);
    margin: 0;
    padding: 0;
    z-index: 10;
}

#header h1 a {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
    padding: 0 0 0 calc((var(--header-ui-size) / 1.5));
}

#header h1 a span {
    font-family: var(--header-font);
    font-size: 0;
    font-weight: 100;
}

#header h1 a span::before {
    content: var(--header-title);
    display: block;
    color: rgb(var(--topbar-txt));
    font-size: var(--header-title-size);
}

#header h2 {
    grid-column: 1 / 5;
    grid-row: 3 / 4;
    height: var(--banner-height);
    margin: 0;
    padding: 0;
}

#header h2 span {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: fit-content;
    height: 100%;
    margin: auto;
    font-size: 0;
    font-family: var(--banner-font);
}

#header h2 span::before {
    content: var(--banner-title);
    display: block;
    font-size: var(--banner-title-size);
}

#header h2 span::after {
    content: var(--banner-subtitle);
    display: block;
    font-size: var(--banner-subtitle-size);
    text-align: center;
    letter-spacing: 1rem;
}


/* ———— 7. 页面主体 ———— */

#content-wrap {
    flex-grow: 1;
    display: flex;
    justify-content: center;
    margin: calc(0px - var(--header-height) - var(--topbar-height)) 1rem 0;
}


/* ———— 8. 侧栏 ———— */

#side-bar {
    display: block;
    width: var(--sidebar-width);
    height: 100%;
    position: fixed;
    top: 0;
    left: calc(0px - var(--sidebar-width));
    margin: 0;
    padding: 0;
    max-height: 100vh;
    overflow-x: hidden;
    overflow-y: scroll;
    z-index: 11;
    direction: rtl;
    scrollbar-width: thin;
    box-sizing: border-box;
    background: rgba(var(--sidebar-bg));
    font-family: var(--ui-font);
    border-right: var(--global-border-width) solid rgb(var(--global-border));
    transition: left var(--global-duration);
}

#side-bar::before {
    --mask-repeat: no-repeat;
    --mask-size: 80% 100%;
    --mask-position: center;

    content: "";
    display: block;
    position: fixed;
    top: 0;
    left: 0;
    width: var(--header-ui-size);
    height: var(--header-ui-size);
    background: rgb(var(--openmenu-txt));
    -webkit-mask-image: var(--sidebar-ui);
    -webkit-mask-repeat: var(--mask-repeat);
    -webkit-mask-size: var(--mask-size);
    -webkit-mask-position: var(--mask-position);
    mask-image: var(--sidebar-ui);
    mask-repeat: var(--mask-repeat);
    mask-size: var(--mask-size);
    mask-position: var(--mask-position);
    cursor: pointer;
    z-index: 11;
    transition: left var(--global-duration), background var(--global-duration);
}

#side-bar::after {
    content: "";
    display: block;
    position: fixed;
    top: 0;
    left: 0;
    width: var(--header-ui-size);
    height: var(--header-ui-size);
    background: rgba(var(--openmenu-bg));
    transition: left var(--global-duration), background var(--global-duration);
}

#side-bar:is(:hover, :focus-within) {
    left: 0;
    transition: left var(--global-hover-duration);
}

#side-bar:is(:hover, :focus-within)::before {
    background: rgba(var(--openmenu-hover-txt));
    left: var(--sidebar-width);
    transition: left var(--global-hover-duration), background var(--global-hover-duration);
}

#side-bar:is(:hover, :focus-within)::after {
    background: rgba(var(--openmenu-hover-bg));
    left: var(--sidebar-width);
    transition: left var(--global-hover-duration), background var(--global-hover-duration);
}

:is(#side-bar, #interwiki) .side-block {
    background: transparent;
    border: unset;
}

:is(#side-bar, #interwiki) .heading {
    margin: 0;
    padding: 0.2rem 0.5rem;
    border-bottom: var(--global-border-width) solid rgb(var(--heading-border));
    background: rgb(var(--heading-bg));
    color: rgb(var(--heading-txt));
    font-family: var(--title-font);
    font-size: 0.8rem;
    font-weight: 700;
}

:is(#side-bar, #interwiki)  .heading p {
    margin: 0;
    padding: 0;
}

:is(#side-bar, #interwiki) .menu-item {
    background: rgb(var(--menu-bg));
    color: rgb(var(--menu-txt));
    border-bottom: var(--global-border-width) solid rgb(var(--heading-border));
    direction: ltr;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
}

:is(#side-bar, #interwiki) .menu-item > * {
    display: contents;
}

:is(#side-bar, #interwiki) .menu-item {
    font-size: 0;
}

:is(#side-bar, #interwiki) .menu-item *:not(p) {
    font-size: 1rem;
}

:is(#side-bar, #interwiki) .menu-item a {
    flex-grow: 1;
    display: block;
    padding: 0.2rem 0;
    color: rgb(var(--menu-txt));
    text-align: center;
    transition: background var(--global-duration), color var(--global-duration);
}

:is(#side-bar, #interwiki) .menu-item a:is(:hover, :focus) {
    background: rgb(var(--menu-hover-bg));
    color: rgb(var(--menu-hover-txt));
    transition: background var(--global-hover-duration), color var(--global-hover-duration);
}

#side-bar .collapsible-block a.collapsible-block-link {
    display: block;
    padding: 0.2rem 0.5rem;
    background: rgb(var(--heading-bg));
    color: rgb(var(--heading-txt));
    font-size: 0.8rem;
    font-weight: bold;
    border-bottom: var(--global-border-width) solid rgb(var(--heading-border));
    transition: background var(--global-duration), color var(--global-duration);
    position: relative;
}

#side-bar :is(.collapsible-block-folded, .collapsible-block-unfolded-link) .collapsible-block-link:is(:hover, :focus) {
    background: rgb(var(--bright-ui-bg));
    color: rgb(var(--bright-ui-txt));
    transition: background var(--global-hover-duration), color var(--global-hover-duration);
}

#side-bar .collapsible-block a.collapsible-block-link::before {
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    aspect-ratio: 1 / 1;
    font-family: "bootstrap-icons";
    font-size: inherit;
}

#side-bar .collapsible-block-folded a.collapsible-block-link::before {
    content: "\F229";
}

#side-bar .collapsible-block-unfolded-link a.collapsible-block-link::before {
    content: "\F235";
}

#side-bar .side-block.media > div[style="text-align: center;"] {
    display: flex;
    justify-content: space-evenly;
}

#side-bar .license div {
    background: rgb(var(--menu-bg));
    color: rgb(var(--menu-txt));
    padding: 1rem;
    border-bottom: var(--global-border-width) solid rgb(var(--heading-border));
}

/* ———— 9. 内容 ———— */

#main-content {
    display:flex;
    flex-direction: column;

    margin: 0;
    padding: 0;
    width: var(--content-width);
    max-width: 100%;
}

/* WHY BHL WHY */#main-content .page-tags, #breadcrumbs {
    margin: 0.5rem 0;
}

#breadcrumbs {
    order: -1;
}

#page-title {
    margin: 1rem 0;
    font-family: var(--title-font);
    font-size: 1.8rem;
    text-align: center;
    border-bottom: var(--global-border-width) solid rgb(var(--global-border));
    letter-spacing: 0.1rem;
}

#page-content {
    flex-grow: 1;
    max-width: 100%;
}

/* 多级标题 */
h1, h2, h3, h4, h5, h6 {
    color: inherit;
    font-family: var(--title-font);
    margin: .5rem 0;
    padding: 0;
    line-height: 1.25;
}

h1 { font-size: 1.8rem; }

h2 { font-size: 1.6rem; }

h3 { font-size: 1.4rem; }

h4 { font-size: 1.2rem; }

h5 { font-size: 1rem; }

h6 { font-size: 0.8rem; }

/* 外部媒体内容 */
img, embed, video, object, iframe, table {
    max-width: 100%;
}

/* 著作信息评分组件 */
.creditRate > .rateBox,
.rate-box-with-credit-button > .page-rate-widget-box {
    display: contents;
}

#page-content .creditRate {
    float: none;
    transform: none;
    display: block;
    margin: 1rem 0;
    text-align: right;
}

div.creditRate .rateBox {
    display: contents;
}

.creditButtonStandalone {
    display: inline-block;
}

div.page-rate-widget-box, div.rate-box-with-credit-button, #page-content .creditButtonStandalone p {
    display: inline-flex;
    gap: 0.2rem;
    align-items: center;
    height: var(--rate-height);
    background: rgb(var(--rate-bg));
    color: rgb(var(--rate-txt));
    font-family: var(--ui-font);
    border: unset;
    border-bottom: var(--global-border-width) solid rgb(var(--global-border));
    border-radius: 0;
    box-shadow: unset;
}

div.page-rate-widget-box .rate-points {
    display: flex;
    align-items: center;
    height: 100%;
    padding: 0 0.5rem;
    background: transparent;
    color: inherit;
    border: unset;
    font-weight: 400;
}

.page-rate-widget-box :is(.rateup, .ratedown, .cancel), .rate-box-with-credit-button .creditButton {
    height: 100%;
    background: transparent;
    border: unset;
}

.page-rate-widget-box :is(.rateup, .ratedown, .cancel) a, .rate-box-with-credit-button .creditButton a, #page-content .creditButtonStandalone p a {
    display: block;
    height: 100%;
    width: var(--rate-height);
    margin: 0;
    padding: 0;
    background: rgb(var(--rate-txt));
    color: transparent;
    border: unset;
    border-radius: 0;
    transition: background var(--global-duration);
}

.page-rate-widget-box :is(.rateup, .ratedown, .cancel):is(:hover, :focus) a, .rate-box-with-credit-button .creditButton:is(:hover, :focus) a {
    display: block;
    color: transparent;
    border: unset;
    transition: background var(--global-hover-duration);
}

.page-rate-widget-box .rateup a {
    --mask-repeat: no-repeat;
    --mask-size: 75%;
    --mask-position: center;
    mask-image: var(--rateup);
    mask-repeat: var(--mask-repeat);
    mask-size: var(--mask-size);
    mask-position: var(--mask-position);
    -webkit-mask-image: var(--rateup);
    -webkit-mask-repeat: var(--mask-repeat);
    -webkit-mask-size: var(--mask-size);
    -webkit-mask-position: var(--mask-position);
}

.page-rate-widget-box .rateup:is(:hover, :focus) {
    background: rgb(var(--rateup-bg));
}

.page-rate-widget-box .rateup:is(:hover, :focus) a {
    background: rgb(var(--rateup-txt));
}

.page-rate-widget-box .ratedown a {
    --mask-repeat: no-repeat;
    --mask-size: 75%;
    --mask-position: center;
    mask-image: var(--ratedown);
    mask-repeat: var(--mask-repeat);
    mask-size: var(--mask-size);
    mask-position: var(--mask-position);
    -webkit-mask-image: var(--ratedown);
    -webkit-mask-repeat: var(--mask-repeat);
    -webkit-mask-size: var(--mask-size);
    -webkit-mask-position: var(--mask-position);
}

.page-rate-widget-box .ratedown:is(:hover, :focus) {
    background: rgb(var(--ratedown-bg));
}

.page-rate-widget-box .ratedown:is(:hover, :focus) a {
    background: rgb(var(--ratedown-txt));
}

.page-rate-widget-box .cancel a {
    --mask-repeat: no-repeat;
    --mask-size: 75%;
    --mask-position: center;
    mask-image: var(--cancel);
    mask-repeat: var(--mask-repeat);
    mask-size: var(--mask-size);
    mask-position: var(--mask-position);
    -webkit-mask-image: var(--cancel);
    -webkit-mask-repeat: var(--mask-repeat);
    -webkit-mask-size: var(--mask-size);
    -webkit-mask-position: var(--mask-position);
}

.page-rate-widget-box .cancel:is(:hover, :focus) {
    background: rgb(var(--cancel-bg));
}

.page-rate-widget-box .cancel:is(:hover, :focus) a {
    background: rgb(var(--cancel-txt));
}

.rate-box-with-credit-button .creditButton a, #page-content .creditButtonStandalone p a {
    --mask-repeat: no-repeat;
    --mask-size: 90%;
    --mask-position: center;
    mask-image: var(--info);
    mask-repeat: var(--mask-repeat);
    mask-size: var(--mask-size);
    mask-position: var(--mask-position);
    -webkit-mask-image: var(--info);
    -webkit-mask-repeat: var(--mask-repeat);
    -webkit-mask-size: var(--mask-size);
    -webkit-mask-position: var(--mask-position);
}

.rate-box-with-credit-button .creditButton:is(:hover, :focus), #page-content .creditButtonStandalone p:is(:hover, :focus) {
    background: rgb(var(--info-bg));
}

.rate-box-with-credit-button .creditButton:is(:hover, :focus) a, #page-content .creditButtonStandalone p:is(:hover, :focus) a {
    background: rgb(var(--info-txt));
}

/* Forked from bedrock - dont k1ll me */
.modalbox .close-credits {
    display: contents;
}

.modalbox .close-credits a {
    color: transparent;
    display: block;
    position: absolute;
    inset-block-start: 0;
    inset-inline-end: 0;
    width: 2rem; height: 2rem;
}

:is(#u-credit-view, #u-credit-otherwise) .fader {
    background: rgba(var(--global-fader-bg));
    backdrop-filter: blur(0.1rem);
}

:is(#u-credit-view,div#u-credit-otherwise) .modalcontainer {
    width: fit-content;
    height: fit-content;
}

:is(#u-credit-view,div#u-credit-otherwise) .modalbox {
    position: relative;
    display: flex;
    flex-direction: column;
    padding: 0;
    margin: auto;
    background: rgb(var(--global-bg));
    color: rgb(var(--global-txt));
    width: 37.5rem;
    max-width: 100%;
    height: 50vh;
    height: 50svh;
    border: var(--global-border-width) solid rgb(var(--global-border));
    border-radius: 0;
    box-shadow: unset;
    cursor: auto;
}

.modalbox > div:first-child {
    background: rgb(var(--light-ui-bg));
    color: rgb(var(--light-ui-txt));
}

.modalbox hr {
    margin: 0;
}

.modalbox .credit {
    flex-grow: 1;
}

.creditBottomRate {
    display: flex;
    justify-content: center;
    align-items: center;
}

.modalbox::after {
    content: "（单击空白处关闭）";
    display: block;
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    margin: 0.5rem 0;
    color: rgb(var(--dark-ui-txt));
    text-align: center;
    font-family: var(--ui-font);
    pointer-events: none;
}

/* 文字上面标注的小字（这东西就叫 ruby） */
.rt, .ruby, rt, ruby {
    text-align: center;
}

.ruby, ruby {
    display: inline-table;
    line-height: 1;
    vertical-align: text-bottom;
}

.rt, rt {
    display: table-header-group;
    font-size: .575em;
    line-height: 1.15;
}

/* 各种图片块 */
#page-content :is(.image-block, .scp-image-block), #page-content :is(.image-block, .scp-image-block)  > * {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
}

:is(.image-block,.scp-image-block) img {
    border: var(--global-border-width) solid rgb(var(--global-border));
    border-bottom: unset;
}

:is(.image-block,.scp-image-block) :is(.image-caption,.scp-image-caption) {
    padding: 0.2rem 0.5rem;
    text-align: center;
    background: rgb(var(--light-block-bg));
    color: rgb(var(--light-block-txt));
    border: var(--global-border-width) solid rgb(var(--global-border));
}

:is(.image-block,.scp-image-block).block-left {
    margin: .5rem 1rem .5rem 0;
    float: left;
}

:is(.image-block,.scp-image-block).block-right {
    margin: .5rem 0 .5rem 1rem;
    float: right;
}

:is(.image-block,.scp-image-block).block-center {
    margin: .5rem auto;
}

/* tab分页栏 */
.yui-navset {
    display: flex;
    flex-direction: column;
    margin: 1rem 0;
    max-width: 100%;
    border: var(--global-border-width) solid rgb(var(--global-border));
}

.yui-navset > * {
    margin: 0;
}

.yui-navset .yui-nav, .yui-navset .yui-navset-top .yui-nav {
    display: flex;
    flex-wrap: wrap;
    background: rgb(var(--tabview-bg));
    border: unset;
    border-bottom: var(--global-border-width)  solid rgb(var(--global-border));
}

:is(.yui-navset .yui-nav, .yui-navset .yui-navset-top .yui-nav) li {
    flex-grow: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0 0.5rem;
    height: calc(var(--global-font-size) * 2);
    background: unset;
    text-align: center;
    border-bottom: var(--global-border-width)  solid rgb(var(--global-border));
    overflow: hidden;
    transition: background var(--global-duration);
}

:is(.yui-navset .yui-nav, .yui-navset .yui-navset-top .yui-nav) li:is(:hover, :focus) {
    background: rgb(var(--tabview-hover-bg));
    transition: background var(--global-hover-duration);
}

:is(.yui-navset .yui-nav, .yui-navset .yui-navset-top .yui-nav) li.selected {
    background: rgb(var(--tabview-selected-bg));
}

:is(.yui-navset .yui-nav, .yui-navset .yui-navset-top .yui-nav) li * {
    display: block;
    width: 100%;
    background: unset;
    border: unset;
}

.yui-navset .yui-nav li a, .yui-navset-top .yui-nav li a, .yui-navset-bottom .yui-nav li a {
    background: unset;
    color: rgb(var(--tabview-txt));
    transition: color var(--global-duration);
}

:is(.yui-navset .yui-nav, .yui-navset .yui-navset-top .yui-nav) li:is(:hover, :focus) a {
    background: unset;
    color: rgb(var(--tabview-hover-txt));
    transition: color var(--global-hover-duration);
}

:is(.yui-navset .yui-nav, .yui-navset .yui-navset-top .yui-nav) li.selected a {
    background: unset;
    color: rgb(var(--tabview-selected-txt));
}

.yui-navset .yui-nav li a em, .yui-navset-top .yui-nav li a em, .yui-navset-bottom .yui-nav li a em {
    background: unset;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.yui-navset .yui-content, .yui-navset .yui-navset-top .yui-content {
    padding: 0 1rem;
    border: unset;
}

/* 分割线 */
hr {
    height: 0;
    margin: 0.2rem 0;
    padding: 0;
    border: unset;
    border-top: var(--global-border-width) solid rgb(var(--global-border));
}

/* 目录 */
#toc {
    position: relative;
    min-width: var(--toc-min-width);
    background-color: rgba(var(--toc-bg));
    color: rgba(var(--toc-txt));
    border: var(--global-border-width) solid rgb(var(--toc-border));
}

#toc .title {
    display: flex;
    justify-content: flex-start;
    align-items: center;

    position: relative;
    width: 100%;
    height: var(--toc-heading-height);
    padding: 0 0.5rem;
    box-sizing: border-box;
    background-color: rgba(var(--toc-heading-bg));
    color: rgba(var(--toc-heading-txt));
    font-weight: bold;
    transition: background var(--global-duration), color var(--global-duration);
}

#toc #toc-action-bar a::before {
    content: "\F235";
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    right: 0;
    width: 1.5rem;
    height: 100%;
    color: rgb(var(--toc-heading-txt));
    font-family: "bootstrap-icons";
    transition: color var(--global-duration);
    pointer-events: none;
}

#toc #toc-action-bar a + a::before {
    content: "\F229";
    pointer-events: none;
}

#toc #toc-action-bar:is(:hover, :focus-within) a::before {
    color: rgb(var(--toc-heading-hover-txt));
    transition: color var(--global-hover-duration);
}

#toc-action-bar:is(:hover, :focus-within) + .title {
    background-color: rgba(var(--toc-heading-hover-bg));
    color: rgba(var(--toc-heading-hover-txt));
    transition: background var(--global-hover-duration), color var(--global-hover-duration);
}

#toc-action-bar:is(:hover, :focus-within) + .title::before {
    background-color: rgba(var(--toc-heading-hover-bg));
    transition: background var(--global-hover-duration);
}

#toc #toc-action-bar {
    display: flex;
    justify-content: center;
    align-items: center;

    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: var(--toc-heading-height);
    box-sizing: border-box;
    z-index: 1;
}

#toc #toc-action-bar a {
    display: block;
    width: 100%;
    height: 100%;
    color: transparent;
}

#toc #toc-list {
    padding: 0.5rem 0.5rem 0.5rem 0;
}

/* 引用块 */
:is(blockquote, .blockquote, div.blockquote, [class*=blockquote]) {
    margin: 1rem 0;
    padding: 0 1rem;
    background: rgb(var(--light-block-bg));
    color: rgb(var(--light-block-txt));
    border: var(--global-border-width) solid rgb(var(--global-border));
}

/* 代码块 */
code, .code, .code pre, .code p, tt, .page-source {
    font-family: var(--mono-font);
    font-size: 1em;
}

.code {
    margin: 1rem 0;
    background: rgb(var(--light-block-bg));
    color: rgb(var(--light-block-txt));
    border: var(--global-border-width) dashed rgb(var(--global-border));
    overflow: auto;
}

pre {
    overflow: visible;
}

/* 有序列表与无序列表 */
:where(ul,ol) {
    margin-left: 1rem;
    list-style: auto;
}

:where(ul) {
    list-style: initial;
}

/* 表格 */

table {
    margin: auto;
}

table:is(.wiki-content-table, .page-compare) {
    max-width: 100%;
    margin: 1rem auto;
    border: var(--global-border-width) solid rgb(var(--global-border));
    border-spacing: 0;
    border-collapse: collapse;
}

:is(#page-content .wiki-content-table, .page-compare) tr th {
    padding: 0.5rem 1rem;
    background-color: rgb(var(--th-bg));
    color: rgb(var(--th-txt));
    text-align: center;
    border-bottom: var(--global-border-width) solid rgb(var(--global-border));
}

:is(#page-content .wiki-content-table, .page-compare) tr td {
    padding: 0.5rem 1rem;
    background-color: rgb(var(--td-bg));
    color: rgb(var(--td-txt));
    border-bottom: var(--global-border-width) solid rgb(var(--global-border));
}


/* Listpages 计数器 */

.pager {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 1rem 0;
    text-align: inherit;
    border-top: var(--global-border-width) solid rgb(var(--global-border));
}

.pager .pager-no {
    padding: 0.2rem 0.5rem;
}

.pager .current {
    margin: unset;
    padding: 0.2rem 0.5rem;
    border: unset;
}

.pager a {
    padding: 0.2rem 0.5rem;
}


/* 自定义元素 */

.bblock {
    background-color: rgb(var(--global-txt));
    transition: color var(--global-duration) linear;
}

.bblock:is(:hover, :focus-within) {
    background-color: rgb(var(--global-txt));
    color: rgb(var(--global-bg));
    transition: color var(--global-hover-duration) linear;
}

.dblock {
    background-color: currentColor;
    transition: background-color var(--global-duration) linear;
}

.dblock:is(:hover, :focus-within) {
    background-color: transparent;
    transition: background-color var(--global-hover-duration) linear;
}

.keycap {
    background-color: rgb(var(--light-ui-bg));
    color: rgb(var(--light-ui-txt));
    padding: 0.2rem;
    box-shadow: 0 0.1rem 0 0.05rem rgb(var(--global-border));
}

.shadebox {
    margin: 2rem 0;
    background: rgba(var(--light-block-bg), 0.4);
    color: rgb(var(--light-block-txt));
    box-shadow: 0 0 0 1rem rgba(var(--light-block-bg), 0.4);
}

.block {
    margin: 1rem 0;
    padding: 1rem;
}

.block > *:first-child {
    margin-top: 0;
}

.block  > *:last-child {
    margin-bottom: 0;
}

.shadow {
    box-shadow: 0 0.2rem 0.5rem rgba(var(--global-dark-color), .8);
}
 
.dropshadow {
    box-shadow: 0 0.2rem 1rem rgba(var(--global-dark-color), .6);
}

.light-bg {
    background: rgb(var(--light-block-bg));
    color: rgb(var(--light-block-txt));
}

.dark-bg {
    background: rgb(var(--dark-block-bg));
    color: rgb(var(--dark-block-txt));
}

/* 脚注块与参考文献 */

.hovertip {
    width: auto !important;
    max-width: 20rem;
    border: var(--global-border-width) solid rgb(var(--global-border)) !important;
    color: rgb(var(--light-ui-txt));
    background-color: rgba(var(--light-ui-bg), .8) !important;
    backdrop-filter: blur(0.1rem);
}

.hovertip .content {
    padding: 0.5rem 1rem;
}

.footnote .f-heading, .equation .e-heading, .reference .r-heading {
    font-weight: inherit;
    font-family: var(--title-font);
    font-size: 120%;
}

.footnote .f-content, .reference .r-content {
    margin: 0.5rem 0;
}

.bibitems, .footnotes-footer {
    height: unset;
    margin: 1rem 0;
    padding: 0;
    border-top: var(--global-border-width) solid rgb(var(--global-border));
}

:is(.bibitems, .footnotes-footer) .title {
    margin: 1rem 0;
    font-family: var(--title-font);
    font-size: 1.8rem;
}

#main-content .page-tags span {
    display: flex;
    align-items: baseline;
    gap: 0.2rem;
    flex-wrap: wrap;
    padding: 0.2rem 0;
    border-top: var(--global-border-width) solid rgb(var(--global-border));
}

#main-content .page-tags span::before {
    content: "标签：";
    font-family: var(--ui-font);
}


/* ———— 10. 工具栏与活动区域 ———— */
#page-options-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    gap: 0.25rem;
}

#page-info {
    flex-grow: 1;
}

#page-options-container .page-options-bottom {
    flex-grow: 1;
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 0.25rem;
    width: 100%;
}

a#more-options-button {
    grid-column: 5 / 6;
    grid-row: 1 / 3;
}

#action-area {
    width: 100%;
    padding: 0;
}

a.action-area-close {
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
}

.new-page-box, #revision-list .pager {
    border: unset;
    border-bottom: var(--global-border-width) solid rgb(var(--global-border));
}

div#who-rated-page-area div {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(12.5rem, 1fr) 1.75rem 0);
    align-items: baseline;
}

#who-rated-page-area>div span[style*=color] {
    display: flex;
    justify-content: center;
    align-items: center;
    color: rgb(var(--global-txt))!important;
}

.page-history {
    width: 100%;
}

form#history-form-1 table.form {
    width: 100%;
}

form#history-form-1 table.form tr {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

form#history-form-1 table.form tr:first-of-type td:first-of-type {
    border-bottom: var(--global-border-width) solid rgb(var(--global-border));
}

form#history-form-1 table.form tr:first-of-type td:last-of-type {
    display: grid;
    grid-template-columns: repeat(auto-fill, 1rem minmax(8rem, 1fr));
    align-items: center;
}

form#history-form-1 table.form tr:last-of-type {
    flex-direction: row;
    justify-content: center;
}

form#history-form-1 table.form tr:last-of-type td:last-of-type{
    position: relative;
}

form#history-form-1 table.form tr:last-of-type td:last-of-type::after {
    content: "\F282";
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    height: 100%;
    width: 1.2rem;
    color: inherit;
    font-family: bootstrap-icons !important;
    font-style: normal;
    font-weight: normal !important;
    font-variant: normal;
    text-transform: none;
    line-height: 1;
    vertical-align: -.125em;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    pointer-events: none;
}

#revision-list .page-history tr:first-child {
    display: none;
}

#revision-list .page-history tr[id*=revision-row] {
    display: grid;
    grid-template-columns: 3rem auto auto 1fr;
    grid-template-rows: auto auto;
    align-items: center;
    justify-items: center;
    gap: 0 0.2rem;
    box-sizing: border-box;
    border-bottom: var(--global-border-width) solid rgb(var(--global-border));
}

#revision-list .page-history tr[id*=revision-row] td {
    width: auto!important;
    padding: 0.2rem 0;
}

#revision-list .page-history tr[id*=revision-row] td > * {
    padding: 0;
}

#revision-list .page-history tr[id*=revision-row] td:nth-child(2) {
    grid-column: 1 / 2;
    grid-row: 2 / 3;
}

#revision-list .page-history tr[id*=revision-row] td:nth-child(3) {
    grid-column: 2 / 3;
    grid-row: 1 / 2;
}

#revision-list .page-history tr[id*=revision-row] td:nth-child(4) {
    grid-column: 2 / 3;
    grid-row: 2 / 3;
    display: flex;
    justify-content: center;
    gap: 0.2rem;
    width: 3rem !important;
}

#revision-list .page-history tr[id*=revision-row] td:nth-child(5) {
    grid-column: 4 / 5;
    grid-row: 1 / 2;
    justify-self: stretch;
    border-bottom: var(--global-border-width) solid rgb(var(--global-border));
}

#revision-list .page-history tr[id*=revision-row] td:nth-child(6) {
    grid-column: 3 / 4;
    grid-row: 1 / 3;
}

#revision-list .page-history tr[id*=revision-row] td:nth-child(7) {
    grid-column: 4 / 5;
    grid-row: 2 / 3;
    justify-self: stretch;
}

.inline-diff.page-source :is(ins,del) {
    background-color: rgb(var(--diff-action-color), .3);
}

.inline-diff.page-source ins {
    --diff-action-color: var(--accept-color);
}

.inline-diff.page-source del {
    --diff-action-color: var(--warning-color);
}

table.page-files {
    width: 100%;
}

#action-area table.page-files > :is(thead,tbody) > tr {
    display: grid;
    gap: 0.5rem;
    grid-template-columns: 3fr 1fr 4rem 2fr;
    align-items: center;
    padding: .2rem;
    border-bottom: var(--global-border-width) solid rgb(var(--global-border));
    overflow-wrap: anywhere;
}

#action-area table.page-files > :is(thead,tbody)  :is(th, td) {
    text-align: center;
}

#action-area table.page-files > tbody td:last-child {
    display: flex;
    gap: 0.5rem;
}

#action-area table.page-files > tbody td:last-child a {
    flex-grow: 1;
}

#file-upload-form table.form {
    width: 100%;
}

#file-upload-form table.form tr {
    display: grid;
    gap: 0.5rem;
    padding: 0.5rem 0;
}

#file-upload-form table.form tr td {
    width: 100%;
    padding: 0;
}

table.form td div.sub, form div.sub {
    text-align: right;
}

#print-options {
    margin-bottom: 1rem;
    background: rgb(var(--light-ui-bg));
    color: rgb(var(--light-ui-txt));
    font-size: inherit;
    font-family: var(--ui-font);
    border-bottom: var(--global-border-width) solid rgb(var(--global-border));
}

#print-options table {
    width: 100%;
}

#print-options table tr td:first-child {
    text-align: right;
}

.print-body #container > hr {
    margin: 0;
}

.site-tools-box {
    padding-top: 0!important;
}

.site-tools-box ul.nav.nav-pills {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
}

ul.nav.nav-pills li {
    display: block;
}

ul.nav.nav-pills li a {
    padding: 0.5rem;
}

#action-area>ul[style="list-style: none"] {
    display: grid;
    margin: 0;
    padding: 0;
    grid-template-columns: repeat(auto-fill, minmax(min(16em, 100%), 1fr));
    gap: 0.2rem;
}

#action-area > h1 + h2 + ul, #action-area > h1 + h2 ~ h2 ~ ul {
    list-style: none;
    margin: 0;
}

#action-area > h1 + h2 + ul > li, #action-area > h1 + h2 ~ h2 ~ ul > li {
    display: flex;
    padding: 0.5rem 0;
    border-bottom: var(--global-border-width) solid rgb(var(--global-border));
}

:is(#action-area>h1 + h2 + ul > li, #action-area > h1 + h2 ~ h2 ~ ul > li) a:first-child {
    flex-grow: 1;
}

.page-source {
    margin: 1rem 0;
    padding: 1rem;
    background: rgb(var(--light-block-bg));
    color: rgb(var(--light-block-txt));
    border: var(--global-border-width) dashed rgb(var(--global-border));
}

#rename-backlinks-box table.form {
    width: 100%;
}

#rename-backlinks-box table.form :is(th, td):not(td:first-child) {
    text-align: center;
}


/* ———— 11. 页面编辑器 ———— */
.edit-help-34, .edit-page-bottomtable {
    font-family: var(--ui-font);
    font-size: calc(0.5rem + 0.5vw);
}

.edit-page-bottomtable tr {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    align-items: center;
}

.edit-page-bottomtable td {
    max-width: max(16rem, 50%);
    flex-grow: 1;
    padding: 0 !important;
}

#edit-page-comments {
    width: 100%;
}

#lock-info {
    margin: 0;
    padding: 0.5rem;
    border: var(--global-border-width) solid rgb(var(--global-border));
    background-color: rgb(var(--light-ui-bg));
    color: rgb(var(--light-ui-txt));
}

.checkbox.do-not-notify {
    display: flex;
    justify-content: center;
    align-items: center;
}

.checkbox.do-not-notify label {
    display: flex;
    gap: 0.2rem;
    align-items: center;
}

div.buttons {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.2rem;
    margin-top: 0.5rem;
    padding: 0;
}

div.buttons input, input.button, button, a.button {
    flex-grow: 1;
    padding: 0.5rem;
    border: var(--global-border-width) solid rgb(var(--global-border));
    background-color: rgb(var(--btn-bg));
    color: rgb(var(--btn-txt));
    font-family: var(--ui-font);
    text-align: center;
    cursor: pointer;
    transition: background var(--global-duration), color var(--global-duration);
}

:is(div.buttons input, input.button, button, a.button):is(:hover, :focus) {
    background-color: rgb(var(--btn-hover-bg));
    color: rgb(var(--btn-hover-txt));
    transition: background var(--global-hover-duration), color var(--global-hover-duration);
}

/* 上面是🍄写的 */
#action-area {
    display: block;
    position: relative;
    margin: 2rem 0;
}

/* 编辑器：编辑区 */

/* 编辑区：表单 */
:is(#edit-page-form, #new-post-form) {
    max-width:100%;
    position: relative;
    padding: 1rem;
    border: var(--global-border-width) solid rgb(var(--global-border));
}

/* 编辑区：页面标题 */
:is(#edit-page-form, #new-post-form) > table.form {
    margin: 0 !important;
    width: 100%;
    font-family: var(--title-font);
}

:is(#edit-page-form, #new-post-form) > table.form tr {
    display: flex;
    flex-direction: column;
    gap: 0.1rem;
    flex-wrap: wrap;
}

#np-editor-title + br {
    display: none;
}

#edit-page-form > table.form tr td:first-of-type, #np-editor-title {
    font-weight: 700;
}

#np-editor-title {
    margin-bottom: 0.1rem;
}

#edit-page-form> table.form tr td:last-of-type {
    flex-grow: 1;
}

#new-post-form > input.text, #edit-page-title {
    padding: 0.2rem 0.5rem;
    width: 100%;
    font-family: var(--title-font);
    font-weight: bold;
    font-size: 130%;
}

/* 编辑区：页面编辑快捷辅助工具 */
.wd-editor-toolbar-panel {
    display: flex;
    gap: .2rem;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    padding: 0.2rem 0;
    line-height: 1.15;
}

.wd-editor-toolbar-panel :is(div, ul, li) {
    display: contents;
}

#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel ul li ul {
    display: contents;
}

/* 页面编辑快捷辅助工具：图标 */
:is(
/* 页面编辑区 */
#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, 
/* 页内讨论帖编辑区 */
#new-post-div > form#new-post-form .wd-editor-toolbar-panel
) a {
    display: inline-block;
    position: relative;
    width: 1.75rem;
    height: 1.75rem;
    min-width: 1.75rem;
    min-height: 1.75rem;
    background-color: rgb(var(--light-ui-bg));
    color: rgb(var(--light-ui-txt));
    border: var(--global-border-width) solid rgb(var(--global-border));
    font-size: 0;
    transition: background var(--global-duration), color var(--global-duration);
}

/* 页面编辑快捷辅助工具：图标 */
:is(
/* 页面编辑区 */
#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, 
/* 页内讨论帖编辑区 */
#new-post-div > form#new-post-form .wd-editor-toolbar-panel
) a:is(:hover, :focus) {
    background-color: rgb(var(--bright-ui-bg));
    color: rgb(var(--bright-ui-txt));
    transition: background var(--global-hover-duration), color var(--global-hover-duration);
}

:is(
/* 页面编辑区 */
#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, 
/* 页内讨论帖编辑区 */
#new-post-div > form#new-post-form .wd-editor-toolbar-panel
) a::before {
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: 0;
    left: 0;
    width: 1.75rem;
    height: 1.75rem;
    min-width: 1.75rem;
    min-height: 1.75rem;
    font-family: bootstrap-icons, var(--ui-font);
    font-size: 1.25rem;
}

/* 图标：第一组 */
/* 图标：1级标题 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-h1::before {
    content: "H1";
    align-items: baseline;
    font-size: 1.2rem;
}

/* 图标：2级标题 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-h2::before {
    content: "H2";
    align-items: baseline;
    font-size: 1.2rem;
}

/* 图标：3级标题 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-h3::before {
    content: "H3";
    align-items: baseline;
    font-size: 1.2rem;
}

/* 图标：4级标题 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-h4::before {
    content: "H4";
    align-items: baseline;
    font-size: 1.1875rem;
}

/* 图标：5级标题 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-h5::before {
    content: "H5";
    align-items: baseline;
    font-size: 1.2rem;
}

/* 图标：6级标题 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-h6::before {
    content: "H6";
    align-items: baseline;
    font-size: 1.2rem;
}

/* 图标：粗体 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-bold::before {
    content: "\F5F0";
}

/* 图标：斜体 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-italic::before {
    content: "\F5F4";
}

/* 图标：下划线 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-underline::before {
    content: "\F5F6";
/*    align-items: baseline; */
}

/* 图标：删除线 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-strikethrough::before {
    content: "\F5F5";
    font-size: 1.3rem;
}

/* 图标：电子报 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-teletype::before {
    content: "\F3DA";
}

/* 图标：引用 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-quote::before {
    content: "\F190";
}

/* 图标：上标 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-superscript::before {
    content: "\F849";
/*    align-items: baseline; */
}

/* 图标：下标 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-subscript::before {
    content: "\F848";
/*    align-items: baseline; */
}

/* 图标：原始 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-raw::before {
    content: "\F152";
/*    align-items: baseline; */
}

/* 图标：第二组 */
/* 图标：分割线 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-hr::before {
    content: "\F34E";
    font-size: 1.25rem;
}

/* 图标：div */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-div::before {
    content: "\F228";
}

/* 图标：清除浮动 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-clearfloat::before {
    content: "\F12B";
    font-size: 1.25rem;
}

/* 图标：清除浮动（左） */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-clearfloatleft::before {
    content: "\F113";
    font-size: 1.25rem;
}

/* 图标：清除浮动（右） */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-clearfloatright::before {
    content: "\F114";
    font-size: 1.25rem;
}

/* 图标：表格 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-table::before {
    content: "\F5AA";
    font-size: 1.25rem;
}

/* 图标：目录 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-toc::before {
    content: "\F488";
    font-size: 1.25rem;
}

/* 图标：代码 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-code::before {
    content: "\F2C7";
    font-size: 1.25rem;
}

/* 图标：代码向导 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-codewiz::before {
    content: "\F2C7";
    width: 50%;
    height: 50%;
    font-size: 1.25rem;
    opacity: 0.3;
}

:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-codewiz::after {
    content: "?";
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: unset;
    left: unset;
    bottom: 0.075rem;
     right: 0.075rem;
    width: 75%;
    height: 75%;
    font-size: calc(1.25rem * 0.75);
}

/* 图标：链接 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-uri::before {
    content: "\F470";
}

/* 图标：链接向导 */
/* pfft WIKIDOT wrote uri instead of urL —— LemonCat🍋🐱 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-uriwiz::before {
    content: "\F470";
    width: 50%;
    height: 50%;
    opacity: 0.3;
}

:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-uriwiz::after {
    content: "?";
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: unset;
    left: unset;
    bottom: 0.075rem;
     right: 0.075rem;
    width: 75%;
    height: 75%;
    font-size: calc(1.25rem * 0.75);
}

/* 图标：站内链接 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-pagelink::before {
    content: "\F3D5";
}

/* 图标：站内链接向导 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-pagelinkwiz::before {
    content: "\F3D5";
    opacity: 0.3;
}

:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-pagelinkwiz::after {
    content: "?";
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: unset;
    left: unset;
    bottom: 0.075rem;
     right: 0.075rem;
    width: 75%;
    height: 75%;
    font-size: calc(1.25rem * 0.75);
}

/* 图标：图片 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-image::before {
    content: "\F226";
    font-size: 1.25rem;
}

/* 图标：图片插入向导 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-imagewiz::before {
    content: "\F226";
    font-size: 1.25rem;
    opacity: 0.3;
}

:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-imagewiz::after {
    content: "?";
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: unset;
    left: unset;
    bottom: 0.075rem;
     right: 0.075rem;
    width: 75%;
    height: 75%;
    font-size: calc(1.25rem * 0.75);
}

/* 图标：HTML */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-html::before {
    content: "\F5C3";
    font-size: 1.25rem;
}

/* 图标：第三组 */
/* 图标：有序列表 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-numlist::before {
    content: "\F475";
}

/* 图标：无序列表 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-bullist::before {
    content: "\F478";
}

/* 图标：增加列表层级 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-incindent::before {
    content: "\F474";
    opacity: 0.3;
}

:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-incindent::after {
    content: "+";
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: unset;
    left: unset;
    bottom: 0.03rem;
     right: 0.03rem;
    width: 50%;
    height: 50%;
    font-size: calc(1.6rem * 0.75);
    fton-weight: bold;
}

/* 图标：减少列表层级 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-decindent::before {
    content: "\F474";
    opacity: 0.3;
}

:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-decindent:after {
    content: "-";
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: unset;
    left: unset;
    bottom: 0.03rem;
     right: 0.03rem;
    width: 50%;
    height: 50%;
    font-size: calc(1.6rem * 0.75);
    fton-weight: bold;
}

/* 图标：定义列表 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-deflist::before {
    content: "\F473";
}

/* 图标：脚注 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-footnote::before {
    content: "\F4EB";
}

/* 图标：块级数学表达式 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-math::before {
    content: "∑";
    align-items: baseline;
    font-size: 1.25rem;
}

:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-math::after {
    content: "\f584";
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    font-family: "bootstrap-icons", var(--ui-font);
    font-size: 1.25rem;
}

/* 图标：行内数学表达式 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-mathinline::before {
    content: "∑";
    align-items: baseline;
    font-size: 1.3rem;
}

/* 图标：公式引用向导 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-eqref::before {
    content: "∑";
    align-items: baseline;
    font-size: 1.3rem;
    opacity: 0.3;
}

:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-eqref::after {
    content: "?";
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: unset;
    left: unset;
    bottom: 0.075rem;
     right: 0.075rem;
    width: 75%;
    height: 75%;
    font-size: calc(1.25rem * 0.75);
}

/* 图标：参考文献块 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-bib::before {
    content: "\F194";
    font-size: 1.25rem;
}

/* 图标：引用参考文献 */
:is(#action-area > div:not(#view-diff-div, preview-message) > form#edit-page-form > .wd-editor-toolbar-panel, #new-post-div > form#new-post-form .wd-editor-toolbar-panel) .weditor-bibcite::before {
    content: "\F1A2";
    font-size: 1.25rem;
}

/* 编辑区：页面内容 */
:is(#edit-page-form, #new-post-form) > div:not(.wd-editor-toolbar-panel, .change-textarea-size, .edit-help-34, .checkbox.do-not-notify, #edit-page-captcha, .buttons.alignleft) {
    display: block;
    position: relative;
}

:is(#edit-page-form, #new-post-form) > div:not(.wd-editor-toolbar-panel, .change-textarea-size, .edit-help-34, .checkbox.do-not-notify, #edit-page-captcha, .buttons.alignleft) > textarea:is(#edit-page-textarea, #np-text) {
    width: 100% !important;
}

/* 编辑区：编辑区大小 “+-” 按钮 */
:is(#edit-page-form, #new-post-form) > .change-textarea-size {
    display: flex;
    gap: 0.2rem;
    justify-content: flex-end;
    align-items: center;
    margin: -0.05rem 0 0.2rem;
}

:is(#edit-page-form, #new-post-form) > .change-textarea-size > a {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 1.2rem;
    height: 1.8rem;
    background-color: rgb(var(--light-ui-bg));
    color: rgb(var(--light-ui-txt));
    border: var(--global-border-width) solid rgb(var(--global-border));
    box-sizing: border-box;
    transition: background var(--global-duration), color var(--global-duration);
}

:is(#edit-page-form, #new-post-form) > .change-textarea-size > a:is(:hover, :focus) {
    background-color: rgb(var(--bright-ui-bg));
    color: rgb(var(--bright-ui-txt));
    transition: background var(--global-hover-duration), color var(--global-hover-duration);
}

/* 编辑区：页面预览提示框 */
.preview-message {
    display: block;
    position: fixed;
    top: calc(var(--header-height) + var(--topbar-height));
    right: 0;
    width: max-content;
    height: max-content;
    margin: 0.5rem;
    padding: 1rem;
    background-color: rgb(var(--light-ui-bg));
    color: rgb(var(--light-ui-txt));
    border: var(--global-border-width) solid rgb(var(--global-border));
}


/* ———— 13. 讨论区 ———— */
#comments-options-hidden {
    text-align: center;
}

#comments-options-shown[style*=block], #comments-options-shown {
    display: flex!important;
    gap: 0.5rem;
    justify-content: center;
}

.thread-container .post-container {
    margin: 1rem 0;
    padding: 1rem;
    width: auto;
    border: var(--global-border-width) solid rgb(var(--global-border));
}

.thread-container .post {
    margin: 0;
    padding: 0;
    width: auto;
}

.thread-container .post .short .options, .thread-container .post .options a {
    float: unset;
    padding: 0.5rem;
    color: rgb(var(--light-ui-txt));
}

:is(.thread-container .post .short .options, .thread-container .post .options a):is(:hover, :focus) {
    background: rgb(var(--bright-ui-bg));
    color: rgb(var(--bright-ui-txt));
}

.thread-container .post .long .options {
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
    margin: 0.2rem 0;
}

.thread-container .post .long .head .info {
    display: flex;
    gap: 0.2rem;
}

.thread-container .post.folded .short {
    display: flex;
    align-items: baseline;
    gap: 0.2rem;
    padding: 0;
    background: unset;
}

.short .odate {
    flex-grow: 1;
}

.short a.btn {
    order: 1;
}


/* ———— 14. 弹窗 ———— */
#odialog-container[style*=block] {
    display: flex !important;
    position: fixed;
    z-index: 50;
    top: inherit;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    justify-content: center;
    align-items: center;
    background: rgba(var(--global-fader-bg));
    backdrop-filter: blur(0.1rem);
}

.owindow {
    width: clamp(18rem, 80%, 48rem)!important;
    top: initial !important;
    left: initial !important;
    background: rgba(var(--global-bg));
    color: rgba(var(--global-txt));
    border: var(--global-border-width) solid rgb(var(--global-border));
}

.owindow .title {
    padding: 0.5rem;
    background: rgba(var(--light-ui-bg));
    color: rgba(var(--light-ui-txt));
    font-family: var(--ui-font);
    cursor: initial;
}

.owindow .content {
    margin: 1rem;
}

div:not(.owait, .osuccess) > .content.modal-body {
    display: grid;
    grid-template-columns: auto 1fr;
    align-items: center;
    gap: 0 1rem;
}

.content.modal-body h1 + div {
    grid-column: 1 / 3;
    height: auto !important;
    max-height: 15vh;
    margin: 0.5rem 0 !important;
}

.content.modal-body table {
    grid-column: 1 / 3;
    width: 100%;
}

.content.modal-body table + div {
    grid-column: 1 / 3;
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
    flex-wrap: wrap;
    margin-top: 1rem !important;
}

.content.modal-body table tr {
    display: flex;
    padding: 0;
    margin: 0;
    gap: 0 0.5rem;
    flex-wrap: wrap;
    border-bottom: var(--global-border-width) solid rgb(var(--global-border));
}

.content.modal-body tr td {
    flex-grow: 3;
    flex-basis: min-content;
    min-width: 16rem;
}

.content.modal-body table tr td:first-child {
    text-align: right;
    flex-grow: 1;
    min-width: auto;
}

.content.modal-body p {
    grid-column: 1 / 3;
}

.owindow>:not(.button-bar,.title)>img {
    float: none !important;
    padding: 0 !important;
    background: 0 0 !important;
    height: 5rem;
}

.owindow .content h1 {
    font-size: 1.5rem;
}

.owindow .content p {
    margin: 0.5rem 0;
}

.owindiw .odate {
    display: inline;
}

.owindow select {
    width: auto;
    appearance: auto;
}

.owindow input {
    max-width: 50vw;
}

.owindow table tr {
    padding: 0.25rem 0;
}

.owindow table tr td:first-child {
    text-align: right;
}

.owindow .button-bar {
    margin: 1rem;
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
}

.owindow .button-bar > a[onclick*=cleanAll] {
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    height: auto;
    margin: 0.2rem 0 0;
    padding: 0;
    z-index: -1;
    font-size: 0;
    text-align: center;
}

.owindow .button-bar > a[onclick*=cleanAll]::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.owindow .button-bar > a[onclick*=cleanAll]::after {
    content: "（单击空白处关闭）";
    font-size: var(--global-font-size);
    color: rgb(var(--dark-ui-txt));
    pointer-events: none;
}

.owindow.osuccess {
    padding: 1rem;
    text-align: center;
}

.owindow.owait .content {
    margin: 0 0 4.5rem;
    padding: 1rem;
    position: relative;
    text-align: center;
}

.owindow.owait .content p {
    text-align: center;
}

.owindow.owait .content::before {
    --size: 2.5rem;
    content: "";
    display: block;
    position: absolute;
    top: calc(50% + 2.5rem);
    left: calc(50% - 1.75rem);
    width: var(--size);
    height: var(--size);
    border: var(--global-border-width) solid rgb(var(--global-border));
    box-sizing: border-box;
    backdrop-filter: blur(.1rem);
    z-index: 1;
    animation: 3s ease-in-out owait infinite reverse;
}

.owindow.owait .content::after {
    --size: 2.5rem;
    content: "";
    display: block;
    position: absolute;
    top: 100%;
    left: calc(50% - 0.75rem);
    width: var(--size);
    height: var(--size);
    background: rgb(var(--dark-ui-bg));
    box-sizing: border-box;
    animation: 3s ease-in-out owait infinite;
}

@keyframes owait {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
}
}


/* ———— 15. 页脚和版权信息 ———— */
#footer {
    display: flex!important;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 0.25rem;
    align-items: center;
    padding: 0.5rem;
    background: rgb(var(--bottombar-bg));
    color: rgb(var(--bottombar-txt));
    font-family: var(--ui-font);
    font-size: calc(0.7rem + 0.3vw);
    border-top: 0.1rem solid rgba(var(--topbar-border));
}

#footer .options{
    padding: 0;
}

#license-area {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    padding: 0.5rem 0;
    background: rgb(var(--bottombar-bg));
    color: rgb(var(--bottombar-txt));
    text-align: center;
    font-family: var(--ui-font);
    font-size: calc(0.7rem + 0.3vw);
}




/* ———— 移动端适配  ———— */
@media only screen and (max-width: 768px) {
  #top-bar .top-bar {
    display: none;
  }

  #top-bar .mobile-top-bar {
    display: block;
    width: 100%;
  }

  #top-bar .open-menu {
    display: none;
  }

#top-bar > div > ul > li {
    position: static;
}

  #top-bar > div > ul > li > ul {
    flex-direction: row;
    flex-wrap: wrap;
    top: 100%;
    left: 0;
  }

  #top-bar > div > ul > li > ul > li {
    flex-basis: 40%;
    flex-grow: 1;
    position: static;
  }

  :is(.image-block,.scp-image-block).block-left, :is(.image-block,.scp-image-block).block-right {
    margin: .5rem auto;
    float: unset;
  }

  #page-options-container .page-options-bottom {
    grid-template-columns: repeat(4, 1fr);
  }

  a#more-options-button {
    grid-column: 1 / 5;
    grid-row: 3 / 4;
  }

  div.owindow > div.content >  table {
    display: block;
    max-height: 30vh;
    overflow-y: auto;
  }

  div.owindow > div.content >  table tr td:first-child {
    text-align: left;
  }
}
